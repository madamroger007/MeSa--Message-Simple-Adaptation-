<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shorcut icon" href="{{  url_for('static', filename='img/logo.png')  }}">
  <meta property="og:title" content="MeSa (Message Simple Adaptation)">
  <meta property="og:description" content="This website for general message">
  <!-- <meta property="og:image" content="{{ url_for('static' , filename='ogimage.jpg') }}"> -->

  <title>Home</title>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet" />
  <!------------------ JAVACRIPT ----------------------->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

  <script src="https://kit.fontawesome.com/584805cf69.js" crossorigin="anonymous"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

  <script src="{{ url_for('static', filename='js/tailwind.js') }}"></script>


</head>

<body>
  <!-- <nav class="navbar is-fixed-top is-white" role="navigation" aria-label="main-navigation">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo" class="mr-2">
        <strong class="is-sparta logo-text">
          SWEETER
        </strong>
      </a>
    </div>
  </nav> -->

  <!-- <section class="section">
    <article class="media">
      <figure class="media-left" style="align-self: center;">
        <a href="/user/{{ user_info.username }}" class="image is-32x32">
          <img src="{{ url_for('static', filename=user_info.profile_pic_real) }}" alt="" class="is-rounded">
        </a>
      </figure>
      <div class="media-content">
        <div class="field">

          <p class="control">
            <input id="input-post" class="input is-rounded" placeholder="What do you thing?"
              onclick="$('#modal-post').addClass('is-active')">


          <div class="modal" id="modal-post">
            <div class="modal-background" onclick="$('#modal-post').removeClass('is-active')">
            </div>
            <div class="modal-content">
              <div class="box">
                <article class="media">
                  <div class="media-content">
                    <div class="field">
                      <p class="control">
                        <textarea id="textarea-post" class="textarea" placeholder="What are you thinking about">
                        </textarea>
                      </p>
                    </div>
                    <nav class="level is-mobile">
                      <div class="level-left">
                      </div>
                      <div class="level-right">
                        <div class="level-item">
                          <a class="button is-sparta" onclick="post()">
                            Create post
                          </a>
                        </div>
                        <div class="level-item">
                          <a class="button is-sparta is-outlined" onclick="$('#modal-post').removeClass('is-active')">
                            Cancel
                          </a>
                        </div>
                      </div>
                    </nav>
                  </div>
                </article>
              </div>
            </div>

            <button class="modal-close is-large" aria-label="close"
              onclick="$('#modal-post').removeClass('is-active')"></button>
          </div>
          </p>
        </div>
      </div>
    </article>
  </section> -->


  <!-- Card Post -->
  <!-- <section class="section">
    <div id="post-box" class="container">

    </div>
  </section> -->

  <div class="errorsSide">
  </div>
  <div class="shareLink">
    <div class="welcomeMess" style="margin-top: 0;">
      <div class="img">
        <a href="/user/{{ user_info.username }}">

          <img src="{{ url_for('static', filename=user_info.profile_pic_real) }}" alt="user">
        </a>

      </div>
      <h1 class="roomTitle" class="roomTitle">Error Pharsing</h1>
      <p id="copyLinker2" class="copyLinker2">#4987720</p>
    </div>
    <input id="copyvalue" type="text" value="#4987720">
    <button id="copyLinker">Copy Code</button>
  </div>
  <div class="nameAlert">
    <h1>Enter your Name</h1><input id="name" type="text" placeholder="Enter your Name">
  </div>

  <div class="mainChater">
    <div class="headerDet">
      <div class="chatDety">
        <div class="img">
          <a href="/user/{{ user_info.username }}">

            <img src="{{ url_for('static', filename=user_info.profile_pic_real) }}" alt="user">
          </a>
        </div>
        <div class="nameC">
          <p class="roomTitle" id='titleFirst' class="roomTitle">Error Pharsing</p>
          <input type="text" name="room name" id="roomNameInput" class="roomTitle" value="Its BrainStorming">
        </div>
      </div>

      <div class="tools">
        <button id="groupEdit" tooltip="Google Meet" flow="left"><span
            class="material-icons blueClick">mode_edit</span></button>
        <button id="settings" tooltip="Room Settings" flow="left"><span
            class="material-icons blueClick">settings</span></button>
      </div>
    </div>

    <div class="blackout"></div>

    <div class="chatArea changeW">
      <div class="chatMessages" id="chatMessages">
        <!--Start of Chat cont-->
        <div class="welcomeMess">
          <div class="img">
            <a href="/">

              <img src="{{ url_for('static', filename='img/wellcome.jpg') }}" alt="wellcome">
            </a>
          </div>

        </div>

     
        <!-- 
  <div class="message mMess {{user_info._id}}" data-number="{{user_info._id}}">
      <div class="messArea">
          <p id="sname">James Ericson</p>
          <div class="textM">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Dignissimos omnis illum voluptates sed provident saepe?.</div></div>
          <div class="prof" style="background-color: #ff7b54;"><p>J</p></div>
  </div> -->
        <!--End of Chat cont-->
      </div>

      <div class="messageBox">
        <button id="genMeetLink" class=" button-s1" tooltip="Google Docs" flow="right"><a
            href="https://docs.google.com/document/u/0/create" target="blank"><span
              class="material-icons">description</span></a></button>
        <!-- <button id="genMeetLink" class=" button-s1" tooltip="Google Meet" flow="right"><a href="https://meet.google.com/new" target="blank"><span class="material-icons">video_call</span></a></button> -->

        <!-- Video Call -->
        <button id="join-btn" class="button-s1" tooltip="Google Meet" flow="right"><span
            class="material-icons">video_call</span></button>

        <button id="linkCopy" class="button-s1" tooltip="Copy Link" flow="up"><span
            class="material-icons">link</span></button>
        <div class="textA"><textarea id="message" name="message" rows="1" cols="30"
            placeholder="Type your message here"></textarea></div>
        <button onclick="sendT()" class="button-s1" tooltip="Send" flow="left"><span
            class="material-icons headerIcon">send</span></button>
      </div>
      <div id="stream-wrapper" class=" hidden">
        <div id="video-streams"></div>

        <div id="stream-controls" class="hidden">
          <button id="leave-btn">Leave <i class="fa-solid fa-arrow-right-from-bracket" style="color: #ffffff;"></i></button>
          <button id="mic-btn">Mic On <i class="fa-solid fa-camera" style="color: #ffffff;"></i></button>
          <button id="camera-btn">Camera on <i class="fa-solid fa-camera" style="color: #ffffff;"></i></button>
        </div>
      </div>

      <div id="goToDown" class="downDowny"><span class="material-icons">arrow_downward</span></div>
    </div>

    <div class="settingsBar">

      <div class="headerSet">
        <div class="welcomeMess">
          <div class="img"><img src="{{ url_for('static', filename=user_info.profile_pic_real) }}" alt="user" /></div>
          <h1 class="roomTitle">Error Pharsing</h1>
          <p id="copyLinker2">#4987720</p>
        </div>
      </div>

      <div class="membersSec">
        <h1>Members</h1>
        <ul id="membersList">
          <li class="membersCont">
            <div class="prof" style="background-color: #ffb26b;">
              <p>A</p>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <script>
      $(document).ready(function () {
        get_posts();

        // Check if the Toast has already been shown
        if (!sessionStorage.getItem('toastShown')) {
          // If not shown, display the Toast
          Toastify({
            text: "Hello {{ user_info.username }}, your successful login",
            className: "info",
            duration: 3000,
            destination: "/user/{{ user_info.username }}",
            newWindow: true,
            close: true,
            gravity: "top",
            position: "right",
            stopOnFocus: true,
            style: {
              background: "green",
            }
          }).showToast();

          // Set a flag in sessionStorage to indicate that the Toast has been shown
          sessionStorage.setItem('toastShown', 'true');
        }
     
      })
      const profile_name = "{{ user_info.profile_name }}"
      const user_username = "{{ user_info.username  }}"
      const Iduser = "{{ user_info._id  }}"
      const profile = "{{ user_info.profile_pic_real}}"
      // Ekspresi reguler untuk mencari tag HTML dalam string
      
    </script>
    <script src="{{ url_for('static', filename='js/index.js') }}"></script>
    <script src="{{ url_for('static', filename='js/AgoraRTC_N-4.19.3.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>


</body>

</html>